import"./assets/styles-DD3qoKza.js";const x="46463630-3c03a0f5bb3e2a02ee15ce5e1",l=new SimpleLightbox(".gallery a#lightbox-link"),n={searchQuery:null,page:1,photos:[],reset(){this.searchQuery=null,this.page=1,this.photos=[]}},d=(e,t)=>Object.assign(document.createElement(e),t),a={element:document.querySelector(".gallery"),clear(){this.element.replaceChildren()},render(e){this.element.append(...Array.isArray(e)?e:[e])},LoadMoreButton:{element:d("button",{className:"btn",textContent:"Load more",async onclick(){try{const e=await u.getPhotos(n.searchQuery,n.page+1);n.page++;const t=e.hits.map(y).map(g).map(S);n.photos.push(...t),a.render(n.photos)}catch{p.error("Sorry, couldn't load images. Please try again later!")}finally{l.refresh()}}}),show(){a.element.after(this.element)},hide(){this.element.remove()}}},p={error(e){iziToast.error({message:e,position:"topRight"})}},u={async getPhotos(e,t=1){const r=new URLSearchParams({key:x,q:e,image_type:"photo",orientation:"horizontal",safesearch:!0,page:t,per_page:40});return(await axios.get("https://pixabay.com/api/",{params:r})).data}},q={create(){return d("div",{className:"loader"})}};document.querySelector("form#image-search").addEventListener("submit",async e=>{e.preventDefault();const t=e.target,r=t.elements.query.value;t.reset(),a.LoadMoreButton.hide(),a.clear(),a.render(q.create()),n.reset();try{const o=await u.getPhotos(r);if(n.searchQuery=r,o.hits.length===0){p.error("Sorry, there are no images matching your search query. Please try again!"),a.clear();return}const c=o.hits.map(y).map(g).map(S);n.photos.push(...c),a.clear(),a.render(c),a.LoadMoreButton.show()}catch{p.error("Sorry, couldn't load images. Please try again later!"),a.clear()}finally{l.refresh()}});const y=({webformatURL:e,largeImageURL:t,tags:r,likes:o,views:c,comments:i,downloads:h})=>({webformatURL:e,largeImageURL:t,tags:r,likes:o,views:c,comments:i,downloads:h}),g=({webformatURL:e,largeImageURL:t,tags:r,likes:o,views:c,comments:i,downloads:h})=>{const b=document.querySelector("template#card-template"),s=document.importNode(b.content,!0),f=s.querySelector("a#lightbox-link");f.href=t;const m=s.querySelector("img.card-img");return m.src=e,m.alt=r,m.title=r,s.querySelector('span.card-stats-item-count[data-item="likes"]').textContent=o,s.querySelector('span.card-stats-item-count[data-item="views"]').textContent=c,s.querySelector('span.card-stats-item-count[data-item="comments"]').textContent=i,s.querySelector('span.card-stats-item-count[data-item="downloads"]').textContent=h,s},S=e=>(e.querySelector("a#lightbox-link").addEventListener("click",t=>{t.preventDefault();const r=o=>{o.key==="Escape"&&(document.removeEventListener("keydown",r),l.close())};document.addEventListener("keydown",r),l.open(t.currentTarget)}),e);
//# sourceMappingURL=hw-12.js.map
