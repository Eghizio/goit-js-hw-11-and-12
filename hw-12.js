import"./assets/styles-DD3qoKza.js";const L="46463630-3c03a0f5bb3e2a02ee15ce5e1",h=new SimpleLightbox(".gallery a#lightbox-link"),P=40,s={searchQuery:null,page:1,photos:[],reset(){this.searchQuery=null,this.page=1,this.photos=[]}},m=(e,t)=>Object.assign(document.createElement(e),t),a={element:document.querySelector(".gallery"),clear(){this.element.replaceChildren()},render(e){this.element.append(...Array.isArray(e)?e:[e])},LoadMoreButton:{element:m("button",{className:"btn",textContent:"Load more",async onclick(){const e=y.create();this.after(e),a.LoadMoreButton.hide();try{const t=await p.getPhotos(s.searchQuery,s.page+1);s.page++;const o=t.hits.map(g).map(f).map(b);s.photos.push(...o),e.remove(),a.render(s.photos),s.photos.length<t.totalHits?a.LoadMoreButton.show():l.info("We're sorry, but you've reached the end of search results.")}catch{l.error("Sorry, couldn't load images. Please try again later!")}finally{h.refresh()}}}),show(){a.element.after(this.element)},hide(){this.element.remove()}}},l={error(e){iziToast.error({message:e,position:"topRight"})},info(e){iziToast.info({message:e,position:"topRight"})}},p={async getPhotos(e,t=1){const o=new URLSearchParams({key:L,q:e,image_type:"photo",orientation:"horizontal",safesearch:!0,page:t,per_page:P}),r=await axios.get("https://pixabay.com/api/",{params:o});return console.log(r.data),r.data}},y={create(){return m("div",{className:"loader"})}};document.querySelector("form#image-search").addEventListener("submit",async e=>{e.preventDefault();const t=e.target,o=t.elements.query.value;t.reset(),a.LoadMoreButton.hide(),a.clear(),a.render(y.create()),s.reset();try{const r=await p.getPhotos(o);if(s.searchQuery=o,r.hits.length===0){l.error("Sorry, there are no images matching your search query. Please try again!"),a.clear();return}const c=r.hits.map(g).map(f).map(b);s.photos.push(...c),a.clear(),a.render(c),s.photos.length<r.totalHits?a.LoadMoreButton.show():l.info("We're sorry, but you've reached the end of search results.")}catch{l.error("Sorry, couldn't load images. Please try again later!"),a.clear()}finally{h.refresh()}});const g=({webformatURL:e,largeImageURL:t,tags:o,likes:r,views:c,comments:i,downloads:d})=>({webformatURL:e,largeImageURL:t,tags:o,likes:r,views:c,comments:i,downloads:d}),f=({webformatURL:e,largeImageURL:t,tags:o,likes:r,views:c,comments:i,downloads:d})=>{const v=document.querySelector("template#card-template"),n=document.importNode(v.content,!0),S=n.querySelector("a#lightbox-link");S.href=t;const u=n.querySelector("img.card-img");return u.src=e,u.alt=o,u.title=o,n.querySelector('span.card-stats-item-count[data-item="likes"]').textContent=r,n.querySelector('span.card-stats-item-count[data-item="views"]').textContent=c,n.querySelector('span.card-stats-item-count[data-item="comments"]').textContent=i,n.querySelector('span.card-stats-item-count[data-item="downloads"]').textContent=d,n},b=e=>(e.querySelector("a#lightbox-link").addEventListener("click",t=>{t.preventDefault();const o=r=>{r.key==="Escape"&&(document.removeEventListener("keydown",o),h.close())};document.addEventListener("keydown",o),h.open(t.currentTarget)}),e);
//# sourceMappingURL=hw-12.js.map
