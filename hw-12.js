import"./assets/styles-DD3qoKza.js";const y="46463630-3c03a0f5bb3e2a02ee15ce5e1",u=new SimpleLightbox(".gallery a#lightbox-link"),s={searchQuery:null,page:1,photos:[]},c={element:document.querySelector(".gallery"),clear(){this.element.replaceChildren()},render(e){this.element.replaceChildren(...Array.isArray(e)?e:[e])}},d={error(e){iziToast.error({message:e,position:"topRight"})}},g={async getPhotos(e,t=1){const r=new URLSearchParams({key:y,q:e,image_type:"photo",orientation:"horizontal",safesearch:!0,page:t,per_page:40});return(await axios.get("https://pixabay.com/api/",{params:r})).data}},S=(e,t)=>Object.assign(document.createElement(e),t),q={create(){return S("div",{className:"loader"})}};document.querySelector("form#image-search").addEventListener("submit",async e=>{e.preventDefault();const t=e.target,r=t.elements.query.value;t.reset(),c.render(q.create());try{s.searchQuery=r,s.page=1;const a=await g.getPhotos(s.searchQuery);if(a.hits.length===0){d.error("Sorry, there are no images matching your search query. Please try again!"),c.clear();return}const n=a.hits.map(x).map(b).map(f);s.photos.push(...n),c.render(n)}catch(a){console.error(a),d.error("Sorry, couldn't load images. Please try again later!"),c.clear()}finally{u.refresh()}});const x=({webformatURL:e,largeImageURL:t,tags:r,likes:a,views:n,comments:l,downloads:i})=>({webformatURL:e,largeImageURL:t,tags:r,likes:a,views:n,comments:l,downloads:i}),b=({webformatURL:e,largeImageURL:t,tags:r,likes:a,views:n,comments:l,downloads:i})=>{const p=document.querySelector("template#card-template"),o=document.importNode(p.content,!0),h=o.querySelector("a#lightbox-link");h.href=t;const m=o.querySelector("img.card-img");return m.src=e,m.alt=r,m.title=r,o.querySelector('span.card-stats-item-count[data-item="likes"]').textContent=a,o.querySelector('span.card-stats-item-count[data-item="views"]').textContent=n,o.querySelector('span.card-stats-item-count[data-item="comments"]').textContent=l,o.querySelector('span.card-stats-item-count[data-item="downloads"]').textContent=i,o},f=e=>(e.querySelector("a#lightbox-link").addEventListener("click",t=>{t.preventDefault();const r=a=>{a.key==="Escape"&&(document.removeEventListener("keydown",r),u.close())};document.addEventListener("keydown",r),u.open(t.currentTarget)}),e);
//# sourceMappingURL=hw-12.js.map
